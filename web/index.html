<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />

    <title>Demo</title>
    <link rel="canonical" href="https://lurklurk.org/skreate/" />
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Skating Diagram Generator</h1>
      </div>
    </header>

    <div id="main">

      <section id="demo">
        <table align="center" class="inner">
          <tr>
            <td>
            <h3>Demo. Try editing me below</h3>
            <div class="editor-wrapper">
              <div class="editor">
              </div>
            </div>
            <a href="#" class="download">Download as SVG</a>
            |
            <a href="#" class="preview">Preview</a>
            </td>
            <td><div class="diagram"></div></td>
          </tr>
        </table>
      </section>

    </div>

    <footer>
      <hr />
      <div class="inner">
        <a href="doc/manual.html">Manual</a> -
        <a href="https://lurklurk.org">David Drysdale<a> -
            <a href="https://github.com/daviddrysdale/skreate">GitHub</a>
      </div>
    </footer>

    <!-- jQuery for $ and friends -->
    <script src="third_party/js/jquery-3.7.1.min.js"></script>
    <!-- Use Ace as the text editor -->
    <script src="third_party/js/ace-1.33.2.min.js" type="text/javascript" charset="utf-8"></script>
    <!-- Borrow debounce from underscore -->
    <script src="third_party/js/underscore-fragments-1.13.6.js" type="text/javascript" charset="utf-8"></script>

    <!-- Note the usage of `type=module` here as this is an ES6 module -->
    <script type="module">
      import {setup_editor, load_skate} from './skreate.js';

      $(document).ready(function() {
        var urlParams = new URLSearchParams(window.location.search);
        var text;
        if (urlParams.has('text')) {
          text = urlParams.get('text');
        } else if (urlParams.get('load')) {
          var url = urlParams.get('load');
          text = load_skate(url);
        } else {
          text = `LFO          # text after a hash is a comment and ignored
xf-RFI3      # put each move on its own line
LFO; xf-RFI  # or use a semi-colon to separate moves

# blank lines are ignored
LFO-Rk

Title [text="My Program"]
Text [text="add text centred here",x=400,y=400]`
        }

        setup_editor($('#demo'), true, text);
      });
    </script>
  </body>
</html>
